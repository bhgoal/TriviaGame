var questions = [{
    number: 0,
    actual: "What year was Snapchat first released?? üòä",
    answers: [ 
        "2008",
        "2010",
        "2011",
        "2012"],
    correct: "C"
},  {
    number: 1,
    actual: "The most used social media site among 13-24 year olds is:",
    answers: [ 
        "Facebook",
        "Snapchat",
        "Twitter",
        "Instagram"],
    correct: "B"
},  {
    number: 2,
    actual: "Advertising with a sponsored lense for one day will cost you:",
    answers: [ 
        "$10,000",
        "$50,000",
        "$100,000",
        "$400,000"],
    correct: "D"
},  {
    number: 3,
    actual: "As of early 2018, how many daily users are on Snapchat?",
    answers: [ 
        "10 million",
        "42 million",
        "187 million",
        "350 million"],
    correct: "C"
},  {
    number: 4,
    actual: "When was the Memories feature added to the app?",
    answers: [ 
        "July 2016",
        "September 2016",
        "October 2016",
        "January 2017"],
    correct: "A"
},  {
    number: 5,
    actual: "What do you see when you're someone else's Best Friend but they aren't one of yours?",
    answers: [ 
        "üòä",
        "üò¨",
        "üò≥",
        "üòè"],
    correct: "D"
},  {
    number: 6,
    actual: "Active Snapchat users open the app how many times each day?",
    answers: [ 
        "5",
        "12",
        "18",
        "32"],
    correct: "C"
},  {
    number: 7,
    actual: "What percent of Snapchat users are female?",
    answers: [ 
        "40%",
        "50%",
        "60%",
        "70%"],
    correct: "D"
},  {
    number: 8,
    actual: "After Kylie Jenner tweeted her disappointment of an app redesign, Snapchat suffered a market value loss of:",
    answers: [ 
        "$200 million",
        "$500 million",
        "$1.3 billion",
        "$2.4 billion"],
    correct: "C"
},  {
    number: 9,
    actual: "What is your favorite color?",
    answers: [ 
        "Blue",
        "Snapchat",
        "Navy Blue",
        "Blue. No, yellow!"],
    correct: "C"
}];

var colorSources = [{
    number: 0,
    answerHeader: "red",
    bgColor: "#b0fff1",
    bgImage: "url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='12' viewBox='0 0 20 12'%3E%3Cg fill-rule='evenodd'%3E%3Cg id='charlie-brown' fill='%2300d9a9' fill-opacity='0.5'%3E%3Cpath d='M9.8 12L0 2.2V.8l10 10 10-10v1.4L10.2 12h-.4zm-4 0L0 6.2V4.8L7.2 12H5.8zm8.4 0L20 6.2V4.8L12.8 12h1.4zM9.8 0l.2.2.2-.2h-.4zm-4 0L10 4.2 14.2 0h-1.4L10 2.8 7.2 0H5.8z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")",
},  {
    number: 1,
    answerHeader: 3,
    bgColor: "#856cae",
    bgImage: "url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.4' fill-rule='nonzero'%3E%3Cpath d='M29 58.58l7.38-7.39A30.95 30.95 0 0 1 29 37.84a30.95 30.95 0 0 1-7.38 13.36l7.37 7.38zm1.4 1.41l.01.01h-2.84l-7.37-7.38A30.95 30.95 0 0 1 6.84 60H0v-1.02a28.9 28.9 0 0 0 18.79-7.78L0 32.41v-4.84L18.78 8.79A28.9 28.9 0 0 0 0 1.02V0h6.84a30.95 30.95 0 0 1 13.35 7.38L27.57 0h2.84l7.39 7.38A30.95 30.95 0 0 1 51.16 0H60v27.58-.01V60h-8.84a30.95 30.95 0 0 1-13.37-7.4L30.4 60zM29 1.41l-7.4 7.38A30.95 30.95 0 0 1 29 22.16 30.95 30.95 0 0 1 36.38 8.8L29 1.4zM58 1A28.9 28.9 0 0 0 39.2 8.8L58 27.58V1.02zm-20.2 9.2A28.9 28.9 0 0 0 30.02 29h26.56L37.8 10.21zM30.02 31a28.9 28.9 0 0 0 7.77 18.79l18.79-18.79H30.02zm9.18 20.2A28.9 28.9 0 0 0 58 59V32.4L39.2 51.19zm-19-1.4a28.9 28.9 0 0 0 7.78-18.8H1.41l18.8 18.8zm7.78-20.8A28.9 28.9 0 0 0 20.2 10.2L1.41 29h26.57z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")",
},  {
    number: 2,
    answerHeader: 3,
    bgColor: 0,
    bgImage: 9
},  {
    number: 3,
    answerHeader: 3,
    bgColor: 0,
    bgImage: 9
},  {
    number: 4,
    answerHeader: 3,
    bgColor: 0,
    bgImage: 9
},  {
    number: 5,
    answerHeader: 3,
    bgColor: 0,
    bgImage: 9
},  {
    number: 6,
    answerHeader: 3,
    bgColor: 0,
    bgImage: 9
},  {
    number: 7,
    answerHeader: 3,
    bgColor: 0,
    bgImage: 9
},  {
    number: 8,
    answerHeader: 3,
    bgColor: 0,
    bgImage: 9
},  {
    number: 9,
    answerHeader: 3,
    bgColor: 0,
    bgImage: 9
},  {
    number: "results",
    answerHeader: 3,
    bgColor: 0,
    bgImage: 9
}];


var quesNum = 0;
var quesTimer;
var intervalID;
var correct = 0;
var wrong = 0;
var unanswered = 0;
//var timeoutID;

function newGame() {
    quesNum = 0;
    correct = 0;
    wrong = 0;
    unanswered = 0;
    $("#quesNumBox").css("visibility", "visible");
    $(".answerBox").show();
    $("#quesActualBox").css({"font-size":"100%", "max-height":"90px", "display":"flex"});
    loadQuestion();
}
newGame();

function colorMe() {
    $("body").css("background-color", colorSources[quesNum].bgColor);
    $("body").css("background-image", colorSources[quesNum].bgImage);
    $(".card-header").css("background-color", colorSources[quesNum].answerHeader);
}

function loadQuestion() {
    colorMe();
    if (quesNum < 10) {
        $("#quesNumBox").html(quesNum + 1 + ".");
        $("#quesActualBox").html(questions[quesNum].actual);
        $("#answerA").html(questions[quesNum].answers[0]);
        $("#answerB").html(questions[quesNum].answers[1]);
        $("#answerC").html(questions[quesNum].answers[2]);
        $("#answerD").html(questions[quesNum].answers[3]);
        $(".card-body").css("font-size", "150%");
        if (quesNum === 5) {
            $(".card-body").css("font-size", "400%");
        }
        questionTimer();
        userResponse();
    } else {
        results();
    }
}


function userResponse() {
    $(".answerBox").off("click").on("click", function(event) {
        event.stopPropagation();
        console.log("answer box clicked");
        var chosenAnswer = $(this).attr("id");
        $(".answerBox").off("click")
        console.log(chosenAnswer);
        console.log(questions[quesNum].correct);
        if (chosenAnswer == questions[quesNum].correct) {
            console.log("correct");
            answeredCorrectly();

        } else {
            console.log("the price is wrong bitch");
            answeredWrong();

        }
    });
}

function questionTimer() {
    $("#timerBox").css("visibility", "visible");
    quesTimer = 5;
    time();
    function time() {
        if (quesTimer === 0) {
            outaTime();
        }
        $("#timerBox").text(quesTimer);
        $("#timerBox").css("font-size", "270%");
        quesTimer--;
    }
    intervalID = setInterval(time, 1000);
    //timeoutID = setTimeout(outaTime, 5000);
}

function answeredCorrectly() {
    //clearTimeout(timeoutID);
    clearInterval(intervalID);
    $("#quesActualBox").html("Correct!");
    $("#timerBox").css("visibility", "hidden");
    quesNum++;
    correct++;
    setTimeout(loadQuestion, 3000);
}

function answeredWrong() {
    //clearTimeout(timeoutID);
    clearInterval(intervalID);
    $("#quesActualBox").html("Incorrect! The answer was " + questions[quesNum].correct);
    $("#timerBox").css("visibility", "hidden");
    quesNum++;
    wrong++;
    setTimeout(loadQuestion, 3000);
}

function outaTime() {
    $("#quesActualBox").html("Out of time! The answer was " + questions[quesNum].correct);
    quesNum++;
    unanswered++;
    setTimeout(loadQuestion, 3000);
    clearInterval(intervalID);
}

function results() {
    $("#quesNumBox").css("visibility", "hidden");
    $("#timerBox").css("visibility", "hidden");
    $(".answerBox").hide();
    $("#quesActualBox").html("Quiz results: <br>Correct: " + correct + "<br>Incorrect: " + wrong + "<br>Unanswered: " + unanswered + "<br>");
    $("#quesActualBox").addClass("text-center");
    $("#quesActualBox").css({"font-size":"150%", "max-height":"500px", "display":"block"});
    var restartButton = $("<button>");
    restartButton.addClass("btn btn-lg btn-primary mt-4");
    //a.attr("type", "button");
    restartButton.text("Restart");
    $("#quesActualBox").append(restartButton);
    $(".btn-primary").click(newGame);
}

function randomQuesAnsw() {
    $("#quesNumBox").html(quesNum);
    var randQues = Math.floor(Math.random() * 4);
    $("#quesActualBox").html(questions[randQues].actual);
    for (i = 0; i < 4; i++) {
        var randAnsw = Math.floor(Math.random() * questions[randQues].answers.length);
        // Needs exclusion of already selected questions
        $(`#answerBox${i}`).html(questions[randQues].answers[randAnsw]);
        questions[randQues].answers.splice($.inArray(randAnsw, questions[randQues].answers),1);
        console.log(questions[randQues].answers);
        // Problem: already selected answers still coming up again
    }
}